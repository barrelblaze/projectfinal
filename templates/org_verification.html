<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verification Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="background: linear-gradient(135deg, #4facfe, #00f2fe); min-height:100vh; display:flex; align-items:center; justify-content:center;">
    <div class="card shadow p-5 text-center" style="max-width:600px; width:100%; border-radius:20px;">
        <h2 class="mb-4" style="color:#4facfe; font-size:2rem;">Verification Page</h2>
        <p style="font-size:1rem; color:#4facfe; opacity:0.7; margin-bottom:2rem;">Upload any legal registration proof of your organization</p>
        {% if proof_status == 'Rejected' %}
            <div class="alert alert-danger mt-3" role="alert">
                Rejected, can't verify proof
            </div>
        {% elif proof_file %}
            <div class="alert alert-info mt-3" role="alert">
                Proof has been sent for review. <b>Pending review.</b>
            </div>
            <div class="mt-4">
                <strong>Uploaded Proof:</strong><br>
                {% if proof_file.endswith('.jpg') or proof_file.endswith('.jpeg') or proof_file.endswith('.png') or proof_file.endswith('.jfif') %}
                    <img src="{{ url_for('static', filename='uploads/' + proof_file) }}" alt="Proof Image" style="max-width:300px; max-height:300px; margin-top:10px;">
                {% else %}
                    <a href="{{ url_for('static', filename='uploads/' + proof_file) }}" target="_blank">View Uploaded Proof</a>
                {% endif %}
            </div>
        {% endif %}
        <form method="POST" enctype="multipart/form-data" class="mt-4" id="proofForm">
            <div class="mb-3 text-center">
                <input type="file" name="proof_file" class="form-control d-none" accept="image/*,.pdf,.doc,.docx" id="proofFileInput" required {% if proof_file %}disabled{% endif %}>
                <label for="proofFileInput" class="btn btn-outline-primary px-4 py-2 {% if proof_file %}disabled opacity-50{% endif %}" style="border-radius:10px; font-weight:600; font-size:1.1rem;">
                    <i class="bi bi-upload" style="font-size:1.3rem; margin-right:8px;"></i>Choose File
                </label>
                <span id="fileName" class="ms-2" style="font-size:1rem; color:#4facfe; opacity:0.8;"></span>
            </div>
        </form>
        <button id="submitProofBtn" type="submit" form="proofForm" class="btn btn-custom mt-3 px-4 py-2 {% if proof_file %}disabled opacity-50{% endif %}" style="font-size:1.1rem; border-radius:10px; background: linear-gradient(135deg, #4facfe, #00f2fe); color:#fff; font-weight:600; max-width:180px; width:100%; margin:auto;" {% if proof_file %}disabled{% endif %}>Submit Proof</button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.js"></script>
    <script>
    const fileInput = document.getElementById('proofFileInput');
    const preview = document.getElementById('filePreview');
    const fileName = document.getElementById('fileName');
    const submitBtn = document.getElementById('submitProofBtn');
    fileInput.addEventListener('change', function(event) {
        const file = event.target.files[0];
        preview.innerHTML = '';
        fileName.textContent = file ? file.name : '';
        if (file) {
            submitBtn.style.display = 'inline-block';
        } else {
            submitBtn.style.display = 'none';
        }
        if (!file) return;
        if (file.type.startsWith('image/')) {
            const img = document.createElement('img');
            img.src = URL.createObjectURL(file);
            img.style.maxWidth = '300px';
            img.style.maxHeight = '300px';
            img.style.borderRadius = '10px';
            img.onload = () => URL.revokeObjectURL(img.src);
            preview.appendChild(img);
        } else if (file.type === 'application/pdf') {
            const embed = document.createElement('embed');
            embed.src = URL.createObjectURL(file);
            embed.type = 'application/pdf';
            embed.width = '300';
            embed.height = '400';
            preview.appendChild(embed);
        } else {
            const p = document.createElement('p');
            p.textContent = 'File selected: ' + file.name;
            preview.appendChild(p);
        }
    });
    </script>
</body>
</html>
